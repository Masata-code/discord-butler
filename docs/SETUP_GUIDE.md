# Discord Butler ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€Discord Butlerã®å®Ÿè£…æ‰‹é †ã¨å‹•ä½œã®è©³ç´°ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ“‹ å®Ÿè£…æ‰‹é †ï¼ˆã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

### 1ï¸âƒ£ é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆ15åˆ†ï¼‰

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/Masata-code/discord-butler.git
cd discord-butler

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
cp .env.example .env
```

### 2ï¸âƒ£ Discord Bot ã®ä½œæˆï¼ˆ20åˆ†ï¼‰

1. [Discord Developer Portal](https://discord.com/developers/applications) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒNew Applicationã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦åå‰ã‚’ã€ŒDiscord Butlerã€ã«
3. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã€ŒBotã€â†’ã€ŒAdd Botã€
4. **ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼**ã—ã¦ `.env` ã® `DISCORD_BOT_TOKEN` ã«è²¼ã‚Šä»˜ã‘
5. ã€ŒOAuth2ã€â†’ã€ŒURL Generatorã€ã§ï¼š
   - Scopes: `bot`, `applications.commands`
   - Bot Permissions: `Send Messages`, `Read Message History`, `Use Slash Commands`
6. ç”Ÿæˆã•ã‚ŒãŸURLã§Botã‚’ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ã«æ‹›å¾…

### 3ï¸âƒ£ PostgreSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆ10åˆ†ï¼‰

```bash
# PostgreSQLãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆ
brew install postgresql@15  # Mac
# ã¾ãŸã¯
sudo apt install postgresql-15  # Ubuntu

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ
createdb discord_butler

# ã‚¹ã‚­ãƒ¼ãƒã‚’é©ç”¨
psql discord_butler < database/schema.sql

# æ¥ç¶šç¢ºèª
psql discord_butler -c "SELECT version();"
```

`.env` ãƒ•ã‚¡ã‚¤ãƒ«ã® `DATABASE_URL` ã‚’æ›´æ–°ï¼š
```
DATABASE_URL=postgresql://ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å:ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰@localhost:5432/discord_butler
```

### 4ï¸âƒ£ n8n ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆ30åˆ†ï¼‰

```bash
# n8nã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g n8n

# n8nã‚’èµ·å‹•
n8n start
```

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:5678 ã«ã‚¢ã‚¯ã‚»ã‚¹
2. åˆå›ã¯ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
3. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã€ŒWorkflowsã€â†’ã€ŒImport from Fileã€
4. `workflows/main-workflow.json` ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
5. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å†…ã®èªè¨¼æƒ…å ±ã‚’è¨­å®šï¼š
   - PostgreSQLæ¥ç¶š
   - OpenAI API
   - Claude APIï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### 5ï¸âƒ£ API ã‚­ãƒ¼ã®å–å¾—ã¨è¨­å®šï¼ˆ20åˆ†ï¼‰

**OpenAI API ã‚­ãƒ¼**:
1. https://platform.openai.com/api-keys ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒCreate new secret keyã€
3. `.env` ã® `OPENAI_API_KEY` ã«è¨­å®š

**Claude API ã‚­ãƒ¼**ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰:
1. https://console.anthropic.com/ ã«ã‚¢ã‚¯ã‚»ã‚¹
2. API ã‚­ãƒ¼ã‚’ä½œæˆ
3. `.env` ã® `CLAUDE_API_KEY` ã«è¨­å®š

**Gemini API ã‚­ãƒ¼**ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰:
1. https://makersuite.google.com/app/apikey ã«ã‚¢ã‚¯ã‚»ã‚¹
2. API ã‚­ãƒ¼ã‚’ä½œæˆ
3. `.env` ã® `GEMINI_API_KEY` ã«è¨­å®š

### 6ï¸âƒ£ åˆæœŸãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥ï¼ˆ5åˆ†ï¼‰

```bash
# AIãƒ„ãƒ¼ãƒ«ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥
psql discord_butler < scripts/seed-tools.sql
```

### 7ï¸âƒ£ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•ï¼ˆ5åˆ†ï¼‰

```bash
# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•
npm run dev

# æ­£å¸¸ã«èµ·å‹•ã™ã‚‹ã¨ä»¥ä¸‹ã®ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š
# âœ… Discord Bot logged in as Discord Butler#1234
# ğŸŒ HTTP server listening on port 3000
# âœ… Discord Butler started successfully!
```

## ğŸ”„ ã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œãƒ•ãƒ­ãƒ¼

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸæ™‚ã®æµã‚Œ

1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒDiscordã§ `/ai` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ**
   ```
   /ai ã‚„ã‚ŠãŸã„ã“ã¨: ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’æ›¸ããŸã„
   ```

2. **Discord Bot ãŒå—ä¿¡**
   - ã‚³ãƒãƒ³ãƒ‰ã‚’è§£æ
   - n8n Webhookã«è»¢é€

3. **n8n ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå‡¦ç†é–‹å§‹**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’DBã‹ã‚‰å–å¾—ï¼ˆæ–°è¦ãªã‚‰ä½œæˆï¼‰
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä½œæˆ

4. **AIãŒã‚¿ã‚¹ã‚¯ã‚’åˆ†æ**ï¼ˆOpenAI GPT-4ï¼‰
   ```json
   {
     "task_type": "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆ",
     "complexity": 3,
     "domain": "content_creation",
     "skill_level": "beginner"
   }
   ```

5. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ãƒ„ãƒ¼ãƒ«ã‚’æ¤œç´¢**
   - ã‚«ãƒ†ã‚´ãƒªã€ã‚¹ã‚­ãƒ«ãƒ¬ãƒ™ãƒ«ã€è¨€èªã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
   - äººæ°—åº¦ã¨æ€§èƒ½ã§ã‚½ãƒ¼ãƒˆ

6. **ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§æœ€é©ãª3ã¤ã‚’é¸å®š**
   - ã‚¿ã‚¹ã‚¯é©åˆæ€§ï¼ˆ30%ï¼‰
   - ã‚¹ã‚­ãƒ«ãƒ¬ãƒ™ãƒ«ä¸€è‡´åº¦ï¼ˆ20%ï¼‰
   - ã‚³ã‚¹ãƒˆåŠ¹ç‡ï¼ˆ25%ï¼‰
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼ˆ15%ï¼‰
   - ãã®ä»–ï¼ˆ10%ï¼‰

7. **ä½¿ç”¨ã‚¬ã‚¤ãƒ‰ã‚’ç”Ÿæˆ**ï¼ˆClaude APIï¼‰
   ```markdown
   ## ãŠã™ã™ã‚AIãƒ„ãƒ¼ãƒ«

   ### 1. Claude
   **ç‰¹å¾´**: è‡ªç„¶ãªæ–‡ç« ç”ŸæˆãŒå¾—æ„
   **æ–™é‡‘**: ç„¡æ–™ãƒ—ãƒ©ãƒ³ã‚ã‚Šï¼ˆæœˆ5å›ã¾ã§ï¼‰
   
   #### ä½¿ã„æ–¹
   1. claude.aiã«ã‚¢ã‚¯ã‚»ã‚¹
   2. Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
   3. æ–°ã—ã„ãƒãƒ£ãƒƒãƒˆã‚’é–‹å§‹
   
   #### ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
   ```
   ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚
   ãƒ†ãƒ¼ãƒï¼š[ã‚ãªãŸã®ãƒ†ãƒ¼ãƒ]
   æ–‡å­—æ•°ï¼š2000æ–‡å­—ç¨‹åº¦
   ãƒˆãƒ¼ãƒ³ï¼šè¦ªã—ã¿ã‚„ã™ã
   ```
   ```

8. **Discordã«çµæœã‚’è¿”ä¿¡**
   - æ¨è–¦çµæœã‚’Embedã§è¡¨ç¤º
   - è©³ç´°ã‚¬ã‚¤ãƒ‰ã‚’é€ä¿¡
   - ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 

## ğŸ¯ å„ã‚³ãƒãƒ³ãƒ‰ã®å‹•ä½œ

### `/ai ã‚„ã‚ŠãŸã„ã“ã¨`
AIãƒ„ãƒ¼ãƒ«ã®æ¨è–¦ã‚’å—ã‘å–ã‚‹ï¼ˆãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½ï¼‰

### `/help`
ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰ã‚’è¡¨ç¤º

### `/feedback ãƒ„ãƒ¼ãƒ«å è©•ä¾¡ ã‚³ãƒ¡ãƒ³ãƒˆ`
ä½¿ç”¨ã—ãŸãƒ„ãƒ¼ãƒ«ã®è©•ä¾¡ã‚’é€ä¿¡ï¼ˆæ¨è–¦ç²¾åº¦å‘ä¸Šã«æ´»ç”¨ï¼‰

### `/history`
éå»ã®æ¨è–¦å±¥æ­´ã‚’è¡¨ç¤º

### `/profile view/update`
ã‚¹ã‚­ãƒ«ãƒ¬ãƒ™ãƒ«ã®ç¢ºèªãƒ»æ›´æ–°

### `/stats`
ã‚·ã‚¹ãƒ†ãƒ çµ±è¨ˆã‚’è¡¨ç¤ºï¼ˆç®¡ç†è€…ã®ã¿ï¼‰

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Discord BotãŒåå¿œã—ãªã„å ´åˆ
- BotãŒã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‹ç¢ºèª
- ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- æ¨©é™ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### n8nã‚¨ãƒ©ãƒ¼ã®å ´åˆ
- Webhook URLãŒæ­£ã—ã„ã‹ç¢ºèª
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚’ç¢ºèª
- API ã‚­ãƒ¼ãŒæœ‰åŠ¹ã‹ç¢ºèª

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ã®å ´åˆ
- PostgreSQLãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
- æ¥ç¶šæƒ…å ±ãŒæ­£ã—ã„ã‹ç¢ºèª
- ã‚¹ã‚­ãƒ¼ãƒãŒé©ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

## ğŸ“ˆ æ¬¡ã®é–‹ç™ºã‚¹ãƒ†ãƒƒãƒ—

1. **ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ©Ÿèƒ½ã®å®Ÿè£…**
2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼å±¥æ­´ã®å¯è¦–åŒ–**
3. **ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®æ§‹ç¯‰**
4. **AIãƒ„ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ‹¡å……**
5. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**

## ğŸ” è©³ç´°ãªæŠ€è¡“ä»•æ§˜

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³
```
Discord Client
    â†“
Discord Bot (Discord.js)
    â†“
n8n Webhook
    â†“
n8n Workflow
    â”œâ†’ PostgreSQL (ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±)
    â”œâ†’ OpenAI API (ã‚¿ã‚¹ã‚¯åˆ†æ)
    â”œâ†’ Tool Database (æ¤œç´¢)
    â”œâ†’ Scoring Algorithm
    â””â†’ Claude API (ã‚¬ã‚¤ãƒ‰ç”Ÿæˆ)
    â†“
Discord Response
```

### ç’°å¢ƒå¤‰æ•°ä¸€è¦§

| å¤‰æ•°å | èª¬æ˜ | å¿…é ˆ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ |
|--------|------|------|------------|
| DISCORD_BOT_TOKEN | Discord Botã®ãƒˆãƒ¼ã‚¯ãƒ³ | âœ“ | - |
| DISCORD_CLIENT_ID | Discord ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ID | âœ“ | - |
| DATABASE_URL | PostgreSQLæ¥ç¶šURL | âœ“ | - |
| OPENAI_API_KEY | OpenAI APIã‚­ãƒ¼ | âœ“ | - |
| CLAUDE_API_KEY | Claude APIã‚­ãƒ¼ | - | - |
| GEMINI_API_KEY | Gemini APIã‚­ãƒ¼ | - | - |
| N8N_WEBHOOK_URL | n8n Webhookã®URL | - | http://localhost:5678/webhook/discord-butler |
| NODE_ENV | å®Ÿè¡Œç’°å¢ƒ | - | development |
| PORT | HTTPã‚µãƒ¼ãƒãƒ¼ãƒãƒ¼ãƒˆ | - | 3000 |
| LOG_LEVEL | ãƒ­ã‚°ãƒ¬ãƒ™ãƒ« | - | info |

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™

- **å¿œç­”æ™‚é–“**: 95%ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒ3ç§’ä»¥å†…
- **åŒæ™‚æ¥ç¶š**: 1,000ãƒ¦ãƒ¼ã‚¶ãƒ¼
- **å¯ç”¨æ€§**: 99.9%ï¼ˆæœˆé–“43.2åˆ†ã®ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ è¨±å®¹ï¼‰

---

æœ€çµ‚æ›´æ–°æ—¥: 2025-07-05